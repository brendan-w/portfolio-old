{% extends "base.html" %}

{% macro render_block(content) -%}
    {% if content is string %}
		{% if content is image_url %}
			<a class='img' href='{{ content }}' style='background-image: url("{{ content }}");'></a>
		{% else %}
			{{ content | safe }}
		{% endif %}
	{% endif %}
{%- endmacro %}

{% set project_data = projects[project] %}

{% block title %}{{ project_data.title }}{% endblock %}

{% block article -%}
		<article>
			<header>
				<span class='name'>{{ project_data.title }}</span>
				<span class='lang'> = 
					{%- for lang in project_data.langs -%}
						{% if loop.index > 1 %}
						+
						{%- endif %}
						{{ lang }}
					{%- endfor %}
				</span>
				<span class='links'>
					{%- for link in project_data.links -%}
						{% if loop.index > 1 %}
						&bull;
						{%- endif %}
						<a href='{{ link["url"] }}'>{{ link["name"] }}</a>
					{%- endfor %}
				</span>
			</header>


			{% for content in project_data.content -%}
				<section>
					{% if content is list %}
						{% for column in content -%}
							<div class='col'>
								{{ render_block(column) }}
							</div>
						{% endfor %}
					{% else %}
						{{ render_block(content) }}
					{% endif %}
				</section>
			{%- endfor %}

		</article>
{% endblock %}
